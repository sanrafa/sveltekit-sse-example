REMOVE TABLE message;

DEFINE TABLE message SCHEMAFULL;

DEFINE FIELD created_at ON TABLE message TYPE datetime VALUE $value OR time::now() ASSERT $value != NONE;

DEFINE FIELD user ON TABLE message TYPE string ASSERT $value != NONE;

DEFINE FIELD text ON TABLE message TYPE string ASSERT $value != NONE AND string::len($value) > 0;

DEFINE FIELD room ON TABLE message TYPE string ASSERT $value INSIDE ["room1", "room2"];